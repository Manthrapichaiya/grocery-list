<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collaborative Grocery List</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        .container {
            max-width: 600px;
        }
        .input-group input, .input-group button {
            border-radius: 0.5rem;
        }
        .quantity-option {
            background-color: #e5e7eb;
            color: #4b5563;
        }
        .quantity-option:hover {
            background-color: #d1d5db;
        }
        input[type="radio"]:checked + span {
            background-color: #10b981;
            color: white;
            border-color: #059669;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fff;
            padding: 2rem;
            border-radius: 1rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">

    <!-- Modal for Messages -->
    <div id="messageModal" class="modal">
        <div class="modal-content">
            <p id="modalMessage" class="text-lg font-semibold text-gray-700"></p>
            <button onclick="hideModal()" class="mt-4 px-6 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors duration-200">OK</button>
        </div>
    </div>

    <!-- Main Container -->
    <div id="app" class="container mx-auto bg-white shadow-xl rounded-2xl p-6 md:p-8 mt-8 w-full transition-all duration-300">
        <h1 class="text-4xl font-bold text-center text-emerald-600 mb-6 drop-shadow-sm">Household Grocery List</h1>
        <p class="text-center text-sm text-gray-500 mb-4">This list is local to your browser. Selections will not be shared.</p>
        
        <!-- Grocery List Section -->
        <div class="bg-white p-4 rounded-lg shadow-md mb-8">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Grocery List (Select Items)</h2>
            <ul id="groceryList" class="space-y-4">
                <!-- Items will be dynamically added here -->
            </ul>
        </div>
        
        <!-- Generate List Section -->
        <div class="p-4 bg-gray-50 rounded-lg shadow-inner">
            <h2 class="text-xl font-semibold mb-3 text-gray-700">Selected List</h2>
            <div class="flex flex-col md:flex-row gap-2 mb-4">
                <button onclick="generateList()" class="flex-1 py-3 bg-indigo-500 text-white font-bold hover:bg-indigo-600 transition-colors duration-200 rounded-lg shadow-md">
                    Generate List
                </button>
                <button onclick="clearSelections()" class="flex-1 py-3 bg-red-500 text-white font-bold hover:bg-red-600 transition-colors duration-200 rounded-lg shadow-md">
                    Reset Selections
                </button>
            </div>
            <textarea id="outputList" class="w-full h-40 p-3 text-gray-800 border-2 border-dashed border-gray-300 rounded-lg resize-none bg-gray-200 focus:outline-none" placeholder="The selected list will appear here." readonly></textarea>
            <button onclick="copyToClipboard()" class="w-full py-2 mt-2 bg-blue-500 text-white font-bold hover:bg-blue-600 transition-colors duration-200 rounded-lg shadow-md">
                Copy to Clipboard
            </button>
        </div>
    </div>

    <!-- No Firebase SDKs -->
    <script>
        // --- HARD-CODED GROCERY LIST ---
        // This is the permanent, one-shot list for your household.
        const GROCERY_ITEMS = [
            { id: 'I_arisi', name: 'I.அரிசி (Rice)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'S_arisi', name: 'S.அரிசி (Rice)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'gothumai_maa', name: 'கோதுமை மா (Wheat Flour)', quantities: ['500g', '1kg', '2kg', '3kg'] },
            { id: 'ravai', name: 'ரவை (Semolina/Sooji)', quantities: ['500g', '1kg', '2kg', '3kg'] },
            { id: 'makkachcholam', name: 'மக்காச்சோளம் (Maize/Corn)', quantities: ['500g', '1kg', '2kg', '3kg'] },
            { id: 'kelvaragu', name: 'கேழ்வரகு (Millet)', quantities: ['500g', '1kg', '2kg', '3kg'] },
            { id: 'paruppu', name: 'பருப்பு (Dal)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'toor_dal', name: 'துவரம் பருப்பு (Toor Dal)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'moong_dal', name: 'பயத்தம் பருப்பு (Moong Dal)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'chana_dal', name: 'கடலை பருப்பு (Chana Dal)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'urad_dal', name: 'உளுத்தம் பருப்பு (Urad Dal)', quantities: ['5kg', '10kg', '15kg', '20kg'] },
            { id: 'karuppu_ulundu', name: 'கருப்பு உளுந்து (Karuppu Ulundu)', quantities: ['500g', '1kg', '2kg', '3kg'] },
            { id: 'green_gram', name: 'பச்சைப்பயறு (Green Gram Whole)', quantities: ['100g', '250g', '500g', '1kg'] },
            { id: 'black_chickpeas', name: 'கருப்பு கொண்டைக் கடலை (Black Chickpeas)', quantities: ['100g', '250g', '500g', '1kg'] },
            { id: 'white_chickpeas', name: 'வெள்ளை கொண்டைக் கடலை (White Chickpeas)', quantities: ['100g', '250g', '500g', '1kg'] },
            { id: 'groundnut', name: 'வேர்க்கடலை (Groundnut/Peanut)', quantities: ['100g', '250g', '500g', '1kg'] },
            { id: 'turmeric_powder', name: 'மஞ்சள் தூள் (Turmeric Powder)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'chilli_powder', name: 'மிளகாய் தூள் (Chilli Powder)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'black_pepper', name: 'மிளகு (Black Pepper)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'cumin_seeds', name: 'சீரகம் (Cumin Seeds)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'fennel_seeds', name: 'சோம்பு (Fennel Seeds)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'mustard_seeds', name: 'கடுகு (Mustard Seeds)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'fenugreek_seeds', name: 'வெந்தயம் (Fenugreek Seeds)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'curry_leaves', name: 'கருவேப்பிலை (Curry Leaves)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'coriander_leaves', name: 'கொத்தமல்லி (Coriander Leaves)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'coriander_seeds', name: 'கொத்தமல்லி விதை (Coriander Seeds)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'cinnamon', name: 'இலவங்கப்பட்டை (Cinnamon)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'cloves', name: 'கிராம்பு (Cloves)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'cardamom', name: 'ஏலக்காய் (Cardamom)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'cassia_bark', name: 'பட்டை (Cassia Bark)', quantities: ['50g', '100g', '200g', '250g'] },
            { id: 'coconut_oil', name: 'தேங்காய் எண்ணெய் (Coconut Oil)', quantities: ['500ml', '1ltr', '2ltr', '3ltr'] },
            { id: 'sesame_oil', name: 'நல்லெண்ணெய் (Sesame Oil)', quantities: ['500ml', '1ltr', '2ltr', '3ltr'] },
            { id: 'groundnut_oil', name: 'கடலை எண்ணெய் (Groundnut Oil)', quantities: ['500ml', '1ltr', '2ltr', '3ltr'] },
            { id: 'ghee', name: 'நெய் (Ghee)', quantities: ['500ml', '1ltr', '2ltr', '3ltr'] },
            { id: 'palm_sugar', name: 'பனங்கற்கண்டு (Palm Sugar Candy)', quantities: ['250g', '500g', '750g', '1kg'] },
            { id: 'jaggery', name: 'வெல்லம் (Jaggery)', quantities: ['250g', '500g', '750g', '1kg'] },
            { id: 'sugar', name: 'சர்க்கரை (Sugar)', quantities: ['250g', '500g', '750g', '1kg'] },
            { id: 'kallu_uppu', name: 'க.உப்பு (Salt)', quantities: ['100g','250g', '500g', '750g'] },
            { id: 'podi_uppu', name: 'ப.உப்பு (Salt)', quantities: ['100g','250g', '500g', '750g'] },
        ];

        // Store selections locally
        let localSelections = {};

        // Function to show a custom modal message
        function showModal(message) {
            document.getElementById('modalMessage').textContent = message;
            document.getElementById('messageModal').style.display = 'flex';
        }

        function hideModal() {
            document.getElementById('messageModal').style.display = 'none';
        }

        // Render the list items in the UI based on the hard-coded list and local selections
        function renderItems(selections = {}) {
            const listEl = document.getElementById('groceryList');
            listEl.innerHTML = '';
            if (GROCERY_ITEMS.length === 0) {
                listEl.innerHTML = '<li class="text-center text-gray-500 italic">No items in the list.</li>';
                return;
            }
            GROCERY_ITEMS.forEach(item => {
                const li = document.createElement('li');
                li.className = 'flex flex-col md:flex-row items-start md:items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm fade-in';
                li.innerHTML = `
                    <div class="flex-1">
                        <span class="text-lg font-bold text-gray-800">${item.name}</span>
                        <div class="flex flex-wrap gap-2 mt-2">
                            ${item.quantities.map((q, index) => {
                                const checked = selections[item.id] === q ? 'checked' : '';
                                return `
                                    <label class="cursor-pointer">
                                        <input type="radio" name="quantity-${item.id}" value="${q}" class="hidden" ${checked} onchange="updateSelection('${item.id}', this.value)">
                                        <span class="inline-block px-3 py-1 rounded-full text-sm font-semibold transition-all duration-200 quantity-option border-2 border-transparent">${q}</span>
                                    </label>
                                `;
                            }).join('')}
                        </div>
                    </div>
                `;
                listEl.appendChild(li);
            });
        }

        // Add or update an item's selection in localSelections
        window.updateSelection = (itemId, quantity) => {
            localSelections[itemId] = quantity;
            renderItems(localSelections);
        };

        // Clear all selections
        window.clearSelections = () => {
            if (Object.keys(localSelections).length === 0) {
                showModal("The list is already empty!");
                return;
            }
            localSelections = {};
            renderItems(localSelections);
            showModal("Selections have been cleared!");
        };

        // Generate the final list
        window.generateList = () => {
            const items = document.querySelectorAll('#groceryList li');
            let output = 'Grocery List:\n\n';
            let hasSelection = false;
            items.forEach(item => {
                const name = item.querySelector('.text-lg').textContent;
                const selectedQuantity = item.querySelector('input[type="radio"]:checked');
                if (selectedQuantity) {
                    output += `- ${name} - ${selectedQuantity.value}\n`;
                    hasSelection = true;
                }
            });
            if (!hasSelection) {
                output = 'Please select some items to generate the list.';
            }
            document.getElementById('outputList').value = output;
        };

        // Copy the generated list to clipboard
        window.copyToClipboard = () => {
            const outputTextarea = document.getElementById('outputList');
            outputTextarea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showModal('List copied successfully!');
                } else {
                    showModal('Failed to copy the list.');
                }
            } catch (err) {
                console.error('Failed to copy: ', err);
                showModal('Failed to copy the list.');
            }
        };

        // Render the list immediately on page load
        document.addEventListener('DOMContentLoaded', () => {
            renderItems(localSelections);
        });
    </script>
</body>
</html>